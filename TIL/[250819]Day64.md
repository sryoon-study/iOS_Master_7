
내일배움캠프 iOS 마스터 Day 64

#내일배움캠프 #iOS #TIL #RxFlow
## 내일배움캠프 iOS 마스터 부트캠프 7기

## Day 64

### 주요 활동
- 최종과제 계획

### 주요 학습

RxFlow 기본틀

1. Step 정의

```swift
import RxFlow

enum AppStep: Step {
    case mainIsRequired
    case detailIsRequired
    case settingsIsRequired
    case back
}
```

2. Flow 만들기

```swift
import UIKit
import RxSwift
import RxCocoa
import RxFlow

/// 하나의 내비게이션 스택을 관리하는 Flow
final class AppFlow: Flow {

    // RxFlow가 요구하는 root (내비게이션 컨트롤러를 root로 둠)
    var root: Presentable { rootNav }

    private let rootNav: UINavigationController

    init(root: UINavigationController) {
        self.rootNav = root
    }

    func navigate(to step: Step) -> FlowContributors {
        guard let step = step as? AppStep else { return .none }
        switch step {
        case .mainIsRequired:
            return navigateToMain()
        ...
    }

    // MARK: - Screens

    private func navigateToMain() -> FlowContributors {
        let vc = MainViewController()
        vc.title = "Main"
        rootNav.setViewControllers([vc], animated: false)
        return .one(flowContributor: .contribute(withNextPresentable: vc, withNextStepper: vc))
        // VC에 Stepper 채택 안하면 오류나니까 확인!
    }

}

```
3. VC에 Stepper 채택

```swift
import UIKit
import SnapKit
import RxSwift
import RxCocoa
import RxFlow

class MainViewController: UIViewController, Stepper {
    let steps = PublishRelay<Step>() // Stepper(Relay 역할)가 필요
    private let bag = DisposeBag()
    ...
}

```



4. SceneDelegate에서 Coordinator 연결

```swift
import UIKit
import RxFlow

class SceneDelegate: UIResponder, UIWindowSceneDelegate {
    var window: UIWindow?
    private let coordinator = FlowCoordinator() // 👈 RxFlow 코디네이터를 보관(해제 방지)

    func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {

        guard let windowScene = (scene as? UIWindowScene) else { return }

        let window = UIWindow(windowScene: windowScene)
        let nav = UINavigationController()
        window.rootViewController = nav
        window.makeKeyAndVisible()
        self.window = window

        // Flow를 만들고, OneStepper로 초기 스텝을 쏘며 코디네이트 시작
        let appFlow = AppFlow(root: nav)
        coordinator.coordinate(flow: appFlow,
                               with: OneStepper(withSingleStep: AppStep.mainIsRequired))
    }
}

```

### 8/19 예상일정
- 와이어프레임 완성
- 최종과제 환경설정

velog 주소    
