좋습니다! 🎯
지금까지 학습하신 **RxSwift + ReactorKit 기반 구조 학습 요약**을 **정리용 문서 형태**로 아래에 제공합니다.
이 요약은 **핵심 원리 + 코드 구조 + 역할 분담 + 예시 흐름**까지 포함되어, 이후 기능 구현 시 참고 자료로 활용하기에 적합합니다.

---

# ✅ RxSwift + ReactorKit 기반 구조 학습 정리

---

## 📦 전체 구조 개요

```plaintext
View (UI 입력)
   ↓
Action (사용자 의도)
   ↓
mutate(action:) → Mutation (변화 단위)
   ↓
reduce(state:mutation:) → State (화면 상태)
   ↓
View (State에 따라 자동 갱신)
```

---

## 1️⃣ BaseViewController\<R: Reactor>

| 목적           | 설명                                                                |
| ------------ | ----------------------------------------------------------------- |
| 공통 구조 제공     | 모든 VC에서 `bind(reactor:)`와 `disposeBag` 재사용                        |
| View 프로토콜 충족 | `reactor`, `bind(reactor:)` 포함                                    |
| 사용 예         | `SearchListViewController: BaseViewController<SearchListReactor>` |

---

## 2️⃣ BaseReactor\<Action, Mutation, State>

| 목적               | 설명                                                |
| ---------------- | ------------------------------------------------- |
| 공통 Reactor 구조 제공 | `initialState`, `state`, `mutate`, `reduce` 공통 구현 |
| 추상화              | `mutate`, `reduce`는 `fatalError()`로 하위 구현 강제      |
| 장점               | 공통 로딩 처리, 에러 처리 등 확장 가능                           |

---

## 3️⃣ SearchListReactor 예시

```swift
enum Action {
    case search(String)
}

enum Mutation {
    case setQuery(String)
}

struct State {
    var query: String = ""
}
```

* `mutate()` → `Action.search("Rx")` → `.setQuery("Rx")`
* `reduce()` → 기존 `state.query` 값을 새로운 값으로 변경
* 상태는 `state: Observable<State>`로 자동 노출됨 (BaseReactor가 구현)

---

## 4️⃣ bind(reactor:)의 역할 (View ↔ Reactor 연결)

```swift
override func bind(reactor: SearchListReactor) {
    // 사용자 입력 → Action
    searchBar.rx.text.orEmpty
        .distinctUntilChanged()
        .debounce(.milliseconds(300), scheduler: MainScheduler.instance)
        .map { .search($0) }
        .bind(to: reactor.action)
        .disposed(by: disposeBag)

    // 상태 → UI
    reactor.state.map { $0.query }
        .distinctUntilChanged()
        .bind(to: searchBar.rx.text)
        .disposed(by: disposeBag)
}
```

| 구분         | 설명                                     |
| ---------- | -------------------------------------- |
| Action 바인딩 | 입력값을 `.search(text)`로 변환하여 Reactor에 전달 |
| State 바인딩  | `state.query`를 UI에 반영 (상태 기반 화면 갱신)    |

---

## 5️⃣ Mutation이 중요한 이유

| 역할          | 설명                                                          |
| ----------- | ----------------------------------------------------------- |
| 중간 상태 변화 단위 | Action과 State 사이의 명확한 추상화                                   |
| 선언적 흐름 표현   | `.setLoading(true) → API → .setResult → .setLoading(false)` |
| 유지보수성 증가    | 상태 변경 과정을 추적하고 조합 가능                                        |

---

## 6️⃣ SceneDelegate 구성

```swift
let reactor = SearchListReactor()
let viewController = SearchListViewController()
viewController.reactor = reactor
window.rootViewController = viewController
```

| 설명                                  |
| ----------------------------------- |
| Reactor는 외부에서 생성해 주입                |
| ViewController는 reactor가 주입된 후에만 동작 |
| 생성자 주입 방식으로 개선하면 더 안전함              |

---

## 💡 추가 개념 정리

| 개념                               | 설명                                                     |
| -------------------------------- | ------------------------------------------------------ |
| `@available(*, unavailable)`     | 해당 생성자/함수 사용을 **컴파일 타임에 금지**                           |
| `SearchListReactor.Action` 같은 표현 | **자기 자신을 참조하는 것이 아니라 내부 타입을 명시하는 것**                   |
| `reactor.state`는 왜 사용 가능?        | `BaseReactor`에서 이미 `state: Observable<State>`로 구현했기 때문 |

---

## ✅ 다음 단계 추천

| 항목        | 구현 방향                                            |
| --------- | ------------------------------------------------ |
| 로딩 상태 표시  | `Mutation.setLoading`, `State.isLoading` 추가      |
| 검색 결과 표시  | `State.books`, TableView 바인딩                     |
| API 요청 처리 | `UseCase`, `NetworkService` 구성 후 Reactor에 주입     |
| 에러 처리     | `Mutation.setError`, `State.errorMessage` 구조로 확장 |

---

이 문서를 `.md` 파일이나 Notion 문서로 옮겨두고 기능 구현할 때 옆에 두고 보면 많은 도움이 될 거예요.
식사 후 준비되시면 어떤 기능부터 구현할지 알려주세요! 순서에 맞춰 단계적으로 도와드릴게요.
